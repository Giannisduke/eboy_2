jQuery(document).ready(function($){window.console||(window.console={log:function(o){}});var o=[];$(".wc-bookings-booking-form").on("change","input, select",function(i){var n=$(this).attr("name"),s=$(this).closest("fieldset"),t=s.find(".picker:eq(0)");if(!t.data("is_range_picker_enabled")||"wc_bookings_field_duration"===n){var e=$(".wc-bookings-booking-form").index(this);$form=$(this).closest("form");var d=!$form.find("[name='wc_bookings_field_start_date_day']").val()&&!$form.find("#wc_bookings_field_start_date").val();if(!jQuery(i.target).hasClass("addon")||!d){var r=$form.find("input.required_for_calculation"),a=!0;if($.each(r,function(o,i){var n=$(i).val();n||(a=!1)}),!a)return void $form.find(".wc-bookings-booking-cost").hide();$form.find(".wc-bookings-booking-cost").block({message:null,overlayCSS:{background:"#000",backgroundSize:"16px 16px",opacity:.6}}).show(),o[e]=$.ajax({type:"POST",url:booking_form_params.ajax_url,data:{action:"wc_bookings_calculate_costs",form:$form.serialize()},success:function(o){"{"!==o.charAt(0)&&(console.log(o),o="{"+o.split(/\{(.+)?/)[1]),result=$.parseJSON(o),"ERROR"==result.result?($form.find(".wc-bookings-booking-cost").html(result.html),$form.find(".wc-bookings-booking-cost").unblock(),$form.find(".single_add_to_cart_button").addClass("disabled"),$form.find(".wc-bookings-fields").hide()):"SUCCESS"==result.result?($form.find(".wc-bookings-booking-cost").html(result.html),$form.find(".wc-bookings-booking-cost").unblock(),$form.find(".single_add_to_cart_button").removeClass("disabled"),$form.find(".wc-bookings-fields").removeClass("hidden_form")):($form.find(".wc-bookings-booking-cost").hide(),$form.find(".single_add_to_cart_button").addClass("disabled"),console.log(o)),$(document.body).trigger("wc_booking_form_changed")},error:function(){$form.find(".wc-bookings-booking-cost").hide(),$form.find(".single_add_to_cart_button").addClass("disabled"),$form.find(".wc-bookings-fields").removeClass("hidden_form")},dataType:"html"})}}}).each(function(){var o=$(this).closest("form").find(".single_add_to_cart_button");o.addClass("disabled")}),$(".single_add_to_cart_button").on("click",function(o){return $(this).hasClass("disabled")?(alert(booking_form_params.i18n_choose_options),o.preventDefault(),!1):void 0}),$(".wc-bookings-booking-form, .wc-bookings-booking-form-button").show().removeAttr("disabled")});